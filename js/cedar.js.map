{"version":3,"sources":["..\\..\\src\\cedar.js"],"names":[],"mappings":"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","file":"cedar.js","sourcesContent":["/**\r\n * Cedar\r\n *\r\n * Generic charting / visualization library for the ArcGIS Platform\r\n * that leverages vega + d3 internally.\r\n */\r\n\r\n(function (factory) {\r\n  'use strict';\r\n  //define an AMD module that relies on 'vega'\r\n  if (typeof define === 'function' && define.amd) {\r\n    define(['vega', 'd3'], function (vg, d3) {\r\n      return factory(vg, d3);\r\n    });\r\n  //define a common js module that relies on 'vega'\r\n  } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n    module.exports = factory(require('vega'), require('d3'));\r\n  }\r\n\r\n  if (typeof window !== 'undefined' && window.vg && window.d3) {\r\n    window.Cedar = factory(window.vg, window.d3);\r\n  }\r\n} (function (vg, d3) {\r\n  'use strict';\r\n\r\n/**\r\n * Constructor\r\n * @param {object} options Cedar options\r\n */\r\nvar Cedar = function Cedar(options){\r\n  //close over this for use in callbacks\r\n  var self = this;\r\n\r\n  //ensure an opts object\r\n  var opts = options || {};\r\n\r\n  /**\r\n   * Internals for holding state\r\n   */\r\n\r\n  // Cedar configuration such as size\r\n  this.width = undefined;\r\n  this.height = undefined;\r\n\r\n  // Array to hold event handlers\r\n  this._events = [];\r\n\r\n  //initialize the internal definition hash\r\n  this._definition = Cedar._defaultDefinition();\r\n\r\n  //the vega view aka the chart\r\n  this._view = undefined;\r\n\r\n  //queue to hold methods called while\r\n  //xhrs are in progress\r\n  this._methodQueue=[];\r\n\r\n  /**\r\n   * Flag used to determine if the library is\r\n   * waiting for an xhr to return. \r\n   */\r\n  this._pendingXhr = false;\r\n\r\n  //defintion \r\n  if(opts.definition){\r\n    //is it an object or string(assumed to be url)\r\n    if(typeof opts.definition === 'object'){\r\n      //hold onto the definition\r\n      this._definition = opts.definition;\r\n    }else if(typeof opts.definition === 'string' ){ \r\n      //assume it's a url (relative or abs) and fetch the definition object\r\n      this._pendingXhr = true;\r\n      Cedar.getJson(opts.definition, function(err,data){\r\n        self._pendingXhr = false;\r\n        self._definition = data; \r\n        self._purgeMethodQueue();\r\n      });\r\n    }else{\r\n      throw new Error('parameter definition must be an object or string (url)');\r\n    }\r\n  }\r\n\r\n  if(opts.override) {\r\n    this._definition.override = opts.override;\r\n  }\r\n\r\n  //template\r\n  if(opts.specification){\r\n    //is it an object or string(assumed to be url)\r\n    if(typeof opts.specification === 'object'){\r\n      //hold onto the template\r\n      this._definition.specification = opts.specification;\r\n\r\n    }else if(typeof opts.specification === 'string' ){ \r\n      //assume it's a url (relative or abs) and fetch the template object\r\n      this._pendingXhr = true;\r\n      Cedar.getJson(opts.specification, function(err,data){\r\n        self._pendingXhr = false;\r\n        self._definition.specification = data; \r\n        self._purgeMethodQueue();\r\n      });\r\n    }else{\r\n      throw new Error('parameter template must be an object or string (url)');\r\n    }\r\n  }\r\n\r\n  //allow a dataset to be passed in...\r\n  if(opts.dataset && typeof opts.dataset === 'object'){\r\n    opts.dataset.query = Cedar._mixin({}, Cedar._defaultQuery(), opts.dataset.query);\r\n    //assign it\r\n    this._definition.dataset = opts.dataset;\r\n  }\r\n\r\n  /**\r\n   * Properties\r\n   *\r\n   * ES 5.1 syntax, so IE 8 & lower won't work\r\n   * \r\n   * If the val is a url, should we expect\r\n   * cedar to fetch the object? \r\n   * \r\n   * I'd say no... as that violates the principal \r\n   * of least suprise. Also - cedar has a .getJSON\r\n   * helper method the dev should use.\r\n   * \r\n   */\r\n      \r\n  Object.defineProperty(this, 'dataset', {\r\n    get: function() {\r\n        return this._definition.dataset;\r\n    },\r\n    set: function(val) {\r\n       this._definition.dataset = val;\r\n    }\r\n  });\r\n\r\n  Object.defineProperty(this, 'specification', {\r\n    get: function() {\r\n        return this._definition.specification;\r\n    },\r\n    set: function(val) {\r\n      this._definition.specification = val;\r\n    }\r\n  });\r\n\r\n  Object.defineProperty(this, 'override', {\r\n    get: function() {\r\n        return this._definition.override;\r\n    },\r\n    set: function(val) {\r\n      this._definition.override = val;\r\n    }\r\n  });  \r\n\r\n};\r\n\r\n\r\n/**\r\n * Inspect the current state of the object\r\n * and determine if we have sufficient information\r\n * to render the chart\r\n * @return {object} Hash of the draw state + any missing requirements\r\n */\r\nCedar.prototype.canDraw = function(){\r\n\r\n  //dataset?\r\n  //dataset.url || dataset.data?\r\n  //dataset.mappings?\r\n  //specification?\r\n  //specification.template?\r\n  //specification.inputs?\r\n  //specification.inputs ~ dataset.mappings?\r\n  \r\n  return {drawable:true, errs:[]};\r\n\r\n};\r\n\r\n/**\r\n * Render a chart in the specified element\r\n * @param  {object} options \r\n * \r\n * options.elementId [required] Id of the Dom element into which the chart will be rendered\r\n * options.token     [optional] Token to be used if the data or spec are on a secured server\r\n */\r\nCedar.prototype.show = function(options){\r\n  if(this._pendingXhr){\r\n    \r\n    this._addToMethodQueue('show', [options]);\r\n\r\n  }else{\r\n\r\n    var err;\r\n    //ensure we got an elementId\r\n    if( !options.elementId ){\r\n      err= \"Cedar.show requires options.elementId\";\r\n    }\r\n    //check if element exists in the page\r\n    if(d3.select(options.elementId)[0][0] === null){\r\n      err = \"Element \" + options.elementId + \" is not present in the DOM\";\r\n     }\r\n  \r\n    //hold onto the id\r\n    this._elementId = options.elementId;\r\n    this._renderer = options.renderer || \"canvas\"; //default to canvas\r\n    this.width = options.width || undefined; // if not set in API, always base on current div size\r\n    this.height = options.height || undefined;\r\n\r\n    //hold onto the token\r\n    if(options.token){\r\n      this._token = options.token;\r\n    }\r\n\r\n    if( err ){\r\n      throw new Error( err );\r\n    }\r\n    var chk = this.canDraw();\r\n    if(chk.drawable){\r\n      //update centralizes the spec compilation & drawing\r\n      this.update();  \r\n    }else{\r\n      //report the issues\r\n      var errs = chk.issues.join(',');\r\n      throw new Error('Chart can not be drawn because: ' + errs);  \r\n    }\r\n    \r\n  }\r\n};\r\n\r\n/**\r\n * Render the chart using the internal state\r\n * Should be called after a user modifies the \r\n * of the dataset, query, mappings or template\r\n */\r\nCedar.prototype.update = function(){\r\n  var self = this;\r\n  \r\n  if ( this._view ) { \r\n    this.emit('update-start');\r\n  }\r\n\r\n  if(this._pendingXhr){\r\n    \r\n    this._addToMethodQueue('update');\r\n\r\n  }else{\r\n\r\n    if(this._view){\r\n      //remove handlers\r\n      //TODO Remove existing handlers\r\n      this._remove(this._view);\r\n    }\r\n    try{\r\n      //ensure we have required inputs or defaults \r\n      var compiledMappings = Cedar._applyDefaultsToMappings(this._definition.dataset.mappings, this._definition.specification.inputs); //Cedar._compileMappings(this._definition.dataset, this._definition.specification.inputs);\r\n\r\n      var queryFromSpec = Cedar._mixin({}, this._definition.specification.query, this._definition.dataset.query);\r\n      queryFromSpec = JSON.parse(Cedar._supplant(JSON.stringify(queryFromSpec), compiledMappings));\r\n\r\n      //allow binding to query properties\r\n      compiledMappings.query = queryFromSpec;\r\n\r\n      //compile the template + mappings --> vega spec\r\n      var spec = JSON.parse(Cedar._supplant(JSON.stringify(this._definition.specification.template), compiledMappings)); \r\n\r\n      // merge in user specified style overrides\r\n      spec = Cedar._mergeRecursive(spec, this._definition.override);\r\n\r\n      //if the spec has a url in the data node, delete it\r\n      if(spec.data[0].url){\r\n        delete spec.data[0].url;\r\n      }\r\n\r\n      if(this._definition.dataset.data){\r\n\r\n        //create the data node using the passed in data\r\n        spec.data[0].values = this._definition.dataset.data;\r\n        \r\n        //send to vega\r\n        this._renderSpec(spec);\r\n      \r\n      }else{\r\n      \r\n        //we need to fetch the data so\r\n        var url = Cedar._createFeatureServiceRequest(this._definition.dataset, queryFromSpec);\r\n      \r\n        //create a callback closure to carry the spec\r\n        var cb = function(err,data){\r\n      \r\n          //todo add error handlers for xhr and ags errors\r\n          spec.data[0].values = data;\r\n          console.dir(spec);\r\n          //send to vega\r\n          self._renderSpec(spec);\r\n\r\n        };\r\n\r\n        //fetch the data from the service\r\n        Cedar.getJson(url, cb);\r\n      }\r\n    }\r\n    catch(ex){\r\n      throw(ex);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Render a fully cooked spec\r\n */\r\nCedar.prototype._renderSpec = function(spec){\r\n  var self = this;\r\n  try{\r\n    //use vega to parse the spec \r\n    //it will handle the spec as an object or url\r\n    vg.parse.spec(spec, function(chartCtor) { \r\n\r\n      //create the view\r\n      self._view = chartCtor({\r\n        el: self._elementId,\r\n        renderer: self._renderer\r\n      });\r\n\r\n      \r\n      var width = self.width || parseInt(d3.select(self._elementId).style('width')) || 500;\r\n      var height = self.height || parseInt(d3.select(self._elementId).style('height')) || 500;\r\n\r\n      //render into the element\r\n      self._view.width(width).height(height).update(); \r\n\r\n      //attach event proxies\r\n      self._attach(self._view);\r\n\r\n      if ( self._view ) { \r\n        self.emit('update-end');\r\n      }\r\n\r\n    });\r\n  }\r\n  catch(ex){\r\n    throw(ex);\r\n  }\r\n};\r\n\r\n/**\r\n * highlight marker based on attribute value\r\n */\r\nCedar.prototype.select = function( opt ) {\r\n  var self = this;\r\n  var view = this._view;\r\n  var items = view.model().scene().items[0].items[0].items;\r\n\r\n  items.forEach(function(item) {\r\n    if ( item.datum.data.attributes[opt.key] === opt.value ) {\r\n      if ( item.hasPropertySet(\"hover\") ) {\r\n        self._view.update({props:\"hover\", items:item});\r\n      }\r\n    }\r\n  });\r\n\r\n};\r\n\r\n\r\n/**\r\n * highlight marker based on attribute value\r\n */\r\nCedar.prototype.clearSelection = function( opt ) {\r\n  var self = this;\r\n  var view = this._view;\r\n  var items = view.model().scene().items[0].items[0].items;\r\n\r\n  if ( opt && opt.key ) {\r\n    items.forEach(function(item) {\r\n      if ( item.datum.data.attributes[opt.key] === opt.value ) {\r\n        self._view.update({props:\"update\", items:item});\r\n      }\r\n    });\r\n  } else {\r\n    //clear all \r\n    self._view.update();\r\n  }\r\n\r\n};\r\n\r\n\r\n// trigger callback \r\nCedar.prototype.emit = function(eventName) {\r\n  if (this._view._handler._handlers[ eventName ] && this._view._handler._handlers[ eventName ][0] !== undefined){\r\n    this._view._handler._handlers[ eventName ][0].handler();\r\n  }\r\n};\r\n\r\n/**\r\n * Attach the generic proxy handlers to the chart view\r\n */\r\nCedar.prototype._attach = function(view){\r\n  \r\n  view.on('mouseover', this._handler('mouseover'));\r\n  view.on('mouseout', this._handler('mouseout'));\r\n  view.on('click', this._handler(\"click\"));\r\n  view.on('update-start', this._handler('update-start'));\r\n  view.on('update-end', this._handler('update-end'));\r\n  \r\n};\r\n\r\n/**\r\n * Remove all event handlers from the view\r\n */\r\nCedar.prototype._remove = function(view){\r\n\r\n  view.off('mouseover');\r\n  view.off('mouseout');\r\n  view.off('click');\r\n  view.off('update-start');\r\n  view.off('update-end');\r\n  \r\n};\r\n\r\n/**\r\n * Helper function that validates that the \r\n * mappings hash contains values for all\r\n * the inputs\r\n * @param  {array} inputs   Array of inputs\r\n * @param  {object} mappings Hash of mappings\r\n * @return {array}          Missing mappings\r\n */\r\nCedar._validateMappings = function(inputs, mappings){\r\n  var missingInputs = [], input;\r\n  for(var i=0;i<inputs.length;i++){\r\n    input = inputs[i];\r\n    if(input.required){\r\n      if(!mappings[input.name]){\r\n        missingInputs.push(input.name);\r\n      }\r\n    }\r\n  }\r\n  return missingInputs;\r\n};\r\n\r\n/**\r\n * Validate that the incoming data has the fields expected\r\n * in the mappings\r\n */\r\nCedar._validateData = function(data, mappings){\r\n  var missingInputs = [];\r\n  if(!data.features || !Array.isArray(data.features)){\r\n    throw new Error('Data is expected to have features array!');\r\n  }\r\n  var firstRow = data.features[0].attributes;\r\n  for(var key in mappings){\r\n    var fld = Cedar._getMappingFieldName(key, mappings[key].field);\r\n    if(!firstRow.hasOwnProperty(fld)){\r\n      missingInputs.push(fld);\r\n    }\r\n  }\r\n  return missingInputs;\r\n};\r\n\r\n/**\r\n * Centralize and abstract the computation of\r\n * expected field names, based on the mapping name\r\n */\r\nCedar._getMappingFieldName = function(mappingName, fieldName){\r\n  var name = fieldName;\r\n  //if(mappingName.toLowerCase() === 'count'){\r\n  //  name = fieldName + '_SUM';\r\n  //}\r\n  return name;\r\n};\r\n\r\n/**\r\n * Return a default definition object\r\n */\r\nCedar._defaultDefinition = function(){\r\n  var defn = {\r\n    \"dataset\": {\r\n      \"query\": this._defaultQuery()\r\n    },\r\n    \"template\":{}\r\n  };\r\n\r\n  defn.dataset.query = Cedar._defaultQuery();\r\n\r\n  return defn;\r\n};\r\n\r\n/**\r\n * Default Query Object\r\n */\r\nCedar._defaultQuery = function(){\r\n  var defaultQuery = {\r\n    \"where\": \"1=1\",\r\n    \"returnGeometry\": false,\r\n    \"returnDistinctValues\": false,\r\n    \"returnIdsOnly\": false,\r\n    \"returnCountOnly\": false,\r\n    \"outFields\": \"*\",\r\n    \"f\": \"json\"\r\n  };\r\n  return defaultQuery;\r\n};\r\n\r\n\r\n\r\n/**\r\n * Generic event handler proxy\r\n */\r\nCedar.prototype._handler = function(evtName) {\r\n  var self = this;\r\n  \r\n  //return a handler function w/ the events hash closed over\r\n  var handler = function(evt, item){\r\n    self._events.forEach( function(registeredHandler){\r\n      if(registeredHandler.type === evtName){\r\n        //invoke the callback with the data\r\n        if ( item ) {\r\n          registeredHandler.callback(evt, item.datum.data.attributes);\r\n        } else {\r\n          registeredHandler.callback(evt,null);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  return handler;\r\n};\r\n\r\n/**\r\n * Add a handler for the named event\r\n */\r\nCedar.prototype.on = function(evtName, callback){\r\n  this._events.push({\"type\":evtName, \"callback\":callback});\r\n};\r\n\r\n/**\r\n * Remove a handler for the named event\r\n */\r\nCedar.prototype.off = function(evtName /*, callback */){\r\n  console.log('Handler for ' + evtName +' removed...');\r\n};\r\n\r\n\r\n/**\r\n * Creates an entry in the method queue, excuted \r\n * once a pending xhr is completed \r\n */\r\nCedar.prototype._addToMethodQueue = function(name, args){\r\n  this._methodQueue.push({ method: name, args: args });\r\n};\r\n\r\n/**\r\n * empties the method queue by calling the queued methods\r\n * This helps build a more syncronous api, while still\r\n * doing async things in the code\r\n */\r\nCedar.prototype._purgeMethodQueue = function(){\r\n  var self = this;\r\n  if(self._methodQueue.length > 0){\r\n\r\n    for(var i=0;i<self._methodQueue.length;i++){\r\n      var action = self._methodQueue[i];\r\n      self[action.method].apply(self, action.args);  \r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * fetch json from a url\r\n * @param  {string}   url      Url to json file\r\n * @param  {Function} callback node-style callback function (err, data)\r\n */\r\nCedar.getJson = function( url, callback ){\r\n  d3.json(url, function(err,data) {\r\n    if(err){\r\n      callback('Error loading ' + url + ' ' + err.message);\r\n    }\r\n    callback(null, data);\r\n  });\r\n};\r\n\r\n\r\nCedar._mixin = function(source) {\r\n    for (var i = 1; i < arguments.length; i++) {\r\n        d3.entries(arguments[i]).forEach(function(p) {\r\n            source[p.key] = p.value;\r\n        });\r\n    }\r\n    return source;\r\n};\r\n\r\n/**\r\n * Given a dataset hash, create the feature service\r\n * query string\r\n */\r\nCedar._createFeatureServiceRequest = function( dataset, queryFromSpec ) {\r\n  var mergedQuery = Cedar._mixin({}, Cedar._defaultQuery(), queryFromSpec);\r\n\r\n  //Handle bbox\r\n  if(mergedQuery.bbox){\r\n    //make sure a geometry was not also passed in\r\n    if(mergedQuery.geometry){\r\n      throw new Error('Dataset.query can not have both a geometry and a bbox specified');\r\n    }\r\n    //get the bbox (W,S,E,N)\r\n    var bboxArr = mergedQuery.bbox.split(',');\r\n\r\n    //remove it so it's not serialized as-is\r\n    delete mergedQuery.bbox;\r\n\r\n    //cook it into a json string \r\n    mergedQuery.geometry = JSON.stringify({\"xmin\": bboxArr[0], \"ymin\": bboxArr[2],\"xmax\": bboxArr[1], \"ymax\": bboxArr[3] });\r\n    //set the spatial ref as geographic\r\n    mergedQuery.inSR = '4326';\r\n  }\r\n  if(!mergedQuery.groupByFieldsForStatistics && dataset.mappings.group) {\r\n      mergedQuery.groupByFieldsForStatistics = dataset.mappings.group.field;\r\n  }\r\n  if(!mergedQuery.outStatistics && dataset.mappings.count) {\r\n    mergedQuery.orderByFields = dataset.mappings.count.field + \"_SUM\";\r\n    mergedQuery.outStatistics = JSON.stringify([{\"statisticType\": \"sum\", \"onStatisticField\": dataset.mappings.count.field, \"outStatisticFieldName\": dataset.mappings.count.field + \"_SUM\"}]);\r\n  }\r\n\r\n\r\n\r\n  //iterate the mappings keys to check for sort\r\n  //-----------------------------------------------------------------\r\n  //This approach would seem 'clean' but if there are multiple fields\r\n  //to sort by, the order would be determined by how javascript decides to\r\n  //iterate the mappings property hash.\r\n  //Thus, using mappings.sort gives the developer explicit control\r\n  //-----------------------------------------------------------------\r\n  // var sort = [];\r\n  // for (var property in dataset.mappings) {\r\n  //   if (dataset.mappings.hasOwnProperty(property)) {\r\n  //     if(dataset.mappings[property].sort){\r\n  //       //ok - build up the sort\r\n  //       sort.push(dataset.mappings[property].field + ' ' + dataset.mappings[property].sort);\r\n  //     }\r\n  //   }\r\n  // }\r\n  // if(sort.length > 0){\r\n  //   mergedQuery.orderByFields = sort.join(',');\r\n  // }\r\n  //-----------------------------------------------------------------\r\n  //check for a sort passed directly in\r\n  if(dataset.mappings.sort){\r\n    mergedQuery.orderByFields = dataset.mappings.sort;\r\n  }\r\n\r\n  var url = dataset.url + \"/query?\" + this._serializeQueryParams(mergedQuery);\r\n  \r\n  if(dataset.token){\r\n    url = url + '&token=' + dataset.token;\r\n  }\r\n  \r\n  return url;\r\n};\r\n\r\nCedar._applyDefaultsToMappings = function(mappings, inputs){\r\n  var errs = [];\r\n  //loop over the inputs\r\n  for(var i =0; i < inputs.length; i++){\r\n    //get the input\r\n    var input = inputs[i];\r\n\r\n    //if it's required and not in the mappings, add an exception\r\n    if(input.required && !mappings[input.name] ){\r\n      errs.push(input.name);\r\n    }\r\n    \r\n    //if it's not required, has a default and not in the mappings\r\n    if(!input.required && !mappings[input.name] && input.default){\r\n      //add the default\r\n      mappings[input.name] = input.default;\r\n    }\r\n  }\r\n\r\n  if(errs.length > 0){\r\n    throw new Error('Required Mappings Missing: ' + errs.join(','));\r\n  }else{\r\n    return mappings;\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Token Replacement on a string\r\n * @param  {string} template string template\r\n * @param  {object} params   object hash that maps to the tokens to be replaced\r\n * @return {string}          string with values replaced\r\n */\r\nCedar._supplant = function( tmpl, params ){\r\n  return tmpl.replace(/{([^{}]*)}/g,\r\n    function (a, b) {\r\n      var r = Cedar._getTokenValue(params, b);\r\n      return typeof r === 'string' || typeof r === 'number' ? r : a;\r\n    }\r\n  );\r\n};\r\n\r\n/*\r\n* Recursively merge properties of two objects \r\n*/\r\nCedar._mergeRecursive = function(obj1, obj2) {\r\n  for (var p in obj2) {\r\n    try {\r\n      // Property in destination object set; update its value.\r\n      if ( obj2[p].constructor===Object || obj2[p].constructor===Array) {\r\n        obj1[p] = Cedar._mergeRecursive(obj1[p], obj2[p]);\r\n\r\n      } else {\r\n        obj1[p] = obj2[p];\r\n\r\n      }\r\n\r\n    } catch(e) {\r\n      // Property in destination object not set; create it and set its value.\r\n      obj1[p] = obj2[p];\r\n\r\n    }\r\n  }\r\n\r\n  return obj1;\r\n};\r\n\r\n/**\r\n * Get the value of a token from a hash\r\n * @param  {[type]} tokens    [description]\r\n * @param  {[type]} tokenName [description]\r\n * @return {[type]}           [description]\r\n * Pulled from gulp-token-replace (MIT license)\r\n * https://github.com/Pictela/gulp-token-replace/blob/master/index.js\r\n * \r\n */\r\nCedar._getTokenValue = function(tokens, tokenName) {\r\n  var tmpTokens = tokens;\r\n  var tokenNameParts = tokenName.split('.');\r\n  for (var i = 0; i < tokenNameParts.length; i++) {\r\n    if (tmpTokens.hasOwnProperty(tokenNameParts[i])) {\r\n      tmpTokens = tmpTokens[tokenNameParts[i]];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  return tmpTokens;\r\n};\r\n\r\n/**\r\n * Serilize an object into a query string\r\n * @param  {object} params Params for the query string\r\n * @return {string}        query string\r\n */\r\nCedar._serializeQueryParams = function(params) {\r\n  var str = [];\r\n  for(var p in params){\r\n    if (params.hasOwnProperty(p)) {\r\n      var val = params[p];\r\n      if (typeof val !== \"string\") {\r\n          val = JSON.stringify(val);\r\n      }\r\n      str.push(encodeURIComponent(p) + \"=\" + encodeURIComponent(val));\r\n    }\r\n  }\r\n  var queryString = str.join(\"&\");\r\n  return queryString;\r\n};\r\n\r\n  return Cedar;\r\n}));\r\n"]}